const a0_0x3411d5=a0_0x1085;(function(_0x559000,_0x496c35){const _0x374c5e=a0_0x1085,_0x96be41=_0x559000();while(!![]){try{const _0x2af465=parseInt(_0x374c5e(0xe9))/0x1*(-parseInt(_0x374c5e(0x148))/0x2)+parseInt(_0x374c5e(0xe2))/0x3*(parseInt(_0x374c5e(0xea))/0x4)+-parseInt(_0x374c5e(0x105))/0x5*(parseInt(_0x374c5e(0x139))/0x6)+parseInt(_0x374c5e(0x108))/0x7+-parseInt(_0x374c5e(0xe5))/0x8*(-parseInt(_0x374c5e(0x104))/0x9)+-parseInt(_0x374c5e(0xdd))/0xa+-parseInt(_0x374c5e(0x14c))/0xb*(-parseInt(_0x374c5e(0x11a))/0xc);if(_0x2af465===_0x496c35)break;else _0x96be41['push'](_0x96be41['shift']());}catch(_0x21bc36){_0x96be41['push'](_0x96be41['shift']());}}}(a0_0x47f6,0x5244f));import{STRINGS}from'./modules/localization.js';import{migrateData}from'./modules/storage-migration.js';import{DEFAULT_CENTER,ZOOM}from'./modules/config.js';function a0_0x47f6(){const _0x3353b7=['directions','60veHaGh','siteModalHotelBtn','btnVisitor','staffScreen','11yVwJHD','tabRecommended','btnStaff','./modules/chat.js','userMessageCount','unlockBtn','btnTextSizeLarge','https://badanwarisanmalaysia.org/','history','allMarkers','userGuideModal','location','btnMapHelp','setProperty','textContent','closeCongratsModal','1333430PDPyAp','allSiteData','value','restaurants','classList','9JUIvhT','forEach','hotels','1264328bxmrHo','min','gatekeeper','getItem','18650ffcDtE','66952lyFQVF','congratsModal','uiZoom','previewOpenBtn','key','keydown','./modules/pwa.js','role','siteModal','search','currentPreviewSiteId','btnInstallApp','closeChallengeModal','btn','siteModalFoodBtn','catch','coordinates','hidden','host','getElementById','_blank','Tell\x20me\x20more\x20about\x20','btnChallenge','adminLoginBtn','passcodeInput','pathname','18sfQzhc','50CQDmkq','map','siteModalAskAI','3129917XPzTdg','currentModalSite','protocol','passportModal','Hide\x20info','./modules/badge.js','jejak_session','documentElement','setView','closeUserGuideModalBtn','toggle','get','welcomeModal','adminResult','style','admin','chatModal','contains','6968892IXFLsk','btnPassport','setItem','siteModalMoreBtn','chatInput','max','DOMContentLoaded','landing-page','closePreviewCard','zoom','preventDefault','Escape','./modules/map.js','tabMustVisit','must_visit','logoOverlay','onclick','trim','marker','challengeModal','name','btnTextSizeSmall','btnTextSizeReset','btnPreLoginHelp','jejak_message_count','parse','pointer','closeSiteModal','./modules/auth.js','remove','popstate','218610auOADe','landingPage','addEventListener','add','btnUIZoomIn','closeUserGuideModal','btnRecenter','jejak_last_active_day','bwm_welcome_shown','./modules/game.js','backToHome','closeChatModal','then','closeWelcomeModal'];a0_0x47f6=function(){return _0x3353b7;};return a0_0x47f6();}import{state,updateState}from'./modules/state.js';import{dom,initializeDOMReferences}from'./modules/dom.js';import{animateOpenModal,animateCloseModal,animateScreenSwitch,openModalState}from'./modules/ui.js';import{isAuthorized,showPlatformWarning}from'./modules/auth.js';import{openGoogleMaps}from'./modules/utils.js';async function initApp(){const _0x461ea7=a0_0x1085;migrateData(),initializeDOMReferences(),setupGlobalEventListeners(),setupUIExtras(),setupUserGuideSystem(),await checkForURLPasskey();const _0x4d6d91=JSON[_0x461ea7(0x133)](localStorage['getItem'](_0x461ea7(0x10e)));_0x4d6d91&&_0x4d6d91['valid']?_0x4d6d91[_0x461ea7(0xf1)]===_0x461ea7(0x117)?handleAdminPersistence(_0x4d6d91):handleUserPersistence():handleNoSession(),setTimeout(async()=>{const _0x5cfaad=_0x461ea7,{setupPWAInstallListeners:_0x34f9e8,setupPWAInstallPrompt:_0x425fca}=await import(_0x5cfaad(0xf0));_0x34f9e8(),_0x425fca();},0xbb8);}function setupGlobalEventListeners(){const _0x2c4d9c=a0_0x1085;document[_0x2c4d9c(0x13b)](_0x2c4d9c(0xef),_0x1d33d7=>{const _0x43fb52=_0x2c4d9c;if(_0x1d33d7[_0x43fb52(0xee)]===_0x43fb52(0x125)){const _0x370521=document['querySelectorAll']('[role=\x22dialog\x22]:not(.hidden)');_0x370521[_0x43fb52(0xe3)](_0xdcc7f=>{const _0x2cf0b6=_0x43fb52;_0xdcc7f['id']!==_0x2cf0b6(0xe7)&&_0xdcc7f['id']!==_0x2cf0b6(0x121)&&animateCloseModal(_0xdcc7f);});}}),window[_0x2c4d9c(0x13b)](_0x2c4d9c(0x138),()=>{const _0x5ce99e=_0x2c4d9c,_0x3baa33=[dom['siteModal'],dom[_0x5ce99e(0x118)],dom[_0x5ce99e(0x10b)],dom[_0x5ce99e(0x114)],dom[_0x5ce99e(0xeb)],dom['challengeModal']];_0x3baa33['forEach'](_0xa13344=>{const _0x26fdb7=_0x5ce99e;if(_0xa13344&&!_0xa13344[_0x26fdb7(0xe1)][_0x26fdb7(0x119)](_0x26fdb7(0xfb)))animateCloseModal(_0xa13344);}),import(_0x5ce99e(0x126))[_0x5ce99e(0x145)](_0xc21d3=>_0xc21d3[_0x5ce99e(0x122)]())[_0x5ce99e(0xf9)](()=>{});});}function handleUserPersistence(){const _0xa6279f=a0_0x1085,_0x11fcc6=new Date()['toDateString'](),_0x2b3986=localStorage['getItem'](_0xa6279f(0x140));_0x2b3986!==_0x11fcc6&&(updateState(_0xa6279f(0x150),0x0,_0xa6279f(0x132)),localStorage[_0xa6279f(0x11c)](_0xa6279f(0x140),_0x11fcc6));if(dom['landingPage'])dom[_0xa6279f(0x13a)][_0xa6279f(0x137)]();if(dom[_0xa6279f(0xe7)])dom[_0xa6279f(0xe7)][_0xa6279f(0x137)]();if(dom['progressContainer'])dom['progressContainer'][_0xa6279f(0xe1)][_0xa6279f(0x137)](_0xa6279f(0xfb));startGame();}async function handleAdminPersistence(_0x329402){const _0x1b7c82=a0_0x1085;if(dom[_0x1b7c82(0x13a)])dom[_0x1b7c82(0x13a)][_0x1b7c82(0x137)]();if(dom[_0x1b7c82(0xe7)])dom[_0x1b7c82(0xe7)][_0x1b7c82(0x137)]();if(dom[_0x1b7c82(0x14b)]){dom[_0x1b7c82(0x14b)][_0x1b7c82(0xe1)]['remove']('hidden'),dom['adminLoginForm'][_0x1b7c82(0xe1)][_0x1b7c82(0x13c)]('hidden'),dom[_0x1b7c82(0x115)][_0x1b7c82(0xe1)][_0x1b7c82(0x137)](_0x1b7c82(0xfb));const {setupAdminTools:_0x23c3b0}=await import(_0x1b7c82(0x136));_0x23c3b0();}}function handleNoSession(){const _0x3d111c=a0_0x1085;updateState('userMessageCount',0x0,_0x3d111c(0x132)),localStorage['removeItem'](_0x3d111c(0x10e)),dom['btnVisitor']&&(dom[_0x3d111c(0x14a)][_0x3d111c(0x12a)]=()=>animateScreenSwitch(dom['landingPage'],dom[_0x3d111c(0xe7)])),dom['btnStaff']&&(dom[_0x3d111c(0x14e)]['onclick']=()=>animateScreenSwitch(dom['landingPage'],dom[_0x3d111c(0x14b)])),dom[_0x3d111c(0x143)]&&(dom[_0x3d111c(0x143)][_0x3d111c(0x12a)]=()=>animateScreenSwitch(dom[_0x3d111c(0xe7)],dom[_0x3d111c(0x13a)])),dom['closeStaffScreen']&&(dom['closeStaffScreen'][_0x3d111c(0x12a)]=()=>animateScreenSwitch(dom[_0x3d111c(0x14b)],dom['landingPage'])),dom[_0x3d111c(0x101)]&&(dom[_0x3d111c(0x101)]['onclick']=async()=>{const _0x201883=_0x3d111c,{handleAdminLogin:_0x1c30c1}=await import(_0x201883(0x136));_0x1c30c1();}),dom[_0x3d111c(0xf5)]&&(dom[_0x3d111c(0xf5)][_0x3d111c(0x12a)]=async()=>{const _0x415a0d=_0x3d111c,{showPWAPrompt:_0x2d9b0e}=await import(_0x415a0d(0xf0));_0x2d9b0e();}),dom[_0x3d111c(0x131)]&&(dom['btnPreLoginHelp'][_0x3d111c(0x12a)]=()=>{const _0x5493e9=_0x3d111c,_0x3deef3=document[_0x5493e9(0xfd)](_0x5493e9(0x156));if(_0x3deef3)_0x3deef3[_0x5493e9(0xe1)][_0x5493e9(0x137)](_0x5493e9(0xfb));}),dom[_0x3d111c(0x151)]&&(dom['unlockBtn']['onclick']=()=>{const _0x3fd24c=_0x3d111c;if(dom[_0x3fd24c(0x102)][_0x3fd24c(0xdf)][_0x3fd24c(0x12b)]())showPlatformWarning();});}async function startGame(){const _0x3d10a4=a0_0x1085,{initializeGameAndMap:_0x36141b}=await import(_0x3d10a4(0x126));await _0x36141b(),setupGameUIListeners();const {updatePassport:_0x49b7b7}=await import(_0x3d10a4(0x142));_0x49b7b7();const {updateChatUIWithCount:_0xe65d63}=await import('./modules/chat.js');_0xe65d63(),!localStorage[_0x3d10a4(0xe8)](_0x3d10a4(0x141))&&setTimeout(()=>{const _0x318da4=_0x3d10a4;animateOpenModal(dom[_0x318da4(0x114)]),localStorage['setItem'](_0x318da4(0x141),'true');},0x5dc);}function setupGameUIListeners(){const _0x1d82dd=a0_0x1085;dom['logoOverlay']&&(dom[_0x1d82dd(0x129)][_0x1d82dd(0x116)]['cursor']=_0x1d82dd(0x134),dom[_0x1d82dd(0x129)][_0x1d82dd(0x12a)]=()=>window['open'](_0x1d82dd(0x153),_0x1d82dd(0xfe))),dom[_0x1d82dd(0x13f)]&&(dom[_0x1d82dd(0x13f)][_0x1d82dd(0x12a)]=()=>{const _0x543bed=_0x1d82dd;if(state[_0x543bed(0x106)])state['map'][_0x543bed(0x110)](DEFAULT_CENTER,ZOOM);}),dom['btnChat']&&(dom['btnChat']['onclick']=async()=>{const _0x235629=_0x1d82dd,{initializeChatSystem:_0x8bdc04}=await import('./modules/chat.js');_0x8bdc04(),animateOpenModal(dom[_0x235629(0x118)]),openModalState(_0x235629(0x118));}),dom['btnPassport']&&(dom[_0x1d82dd(0x11b)][_0x1d82dd(0x12a)]=async()=>{const _0x4493f7=_0x1d82dd,{updatePassport:_0x55f5e0}=await import('./modules/game.js'),{setupBadgeGeneration:_0x4339b4}=await import(_0x4493f7(0x10d));_0x55f5e0(),_0x4339b4(),animateOpenModal(dom['passportModal']),openModalState('passportModal');}),dom[_0x1d82dd(0x100)]&&(dom[_0x1d82dd(0x100)]['onclick']=async()=>{const _0x4293d3=_0x1d82dd,{updateChallengeModal:_0x1809fd}=await import(_0x4293d3(0x142));_0x1809fd(),animateOpenModal(dom[_0x4293d3(0x12d)]);}),[{'btn':dom[_0x1d82dd(0x144)],'modal':dom['chatModal']},{'btn':dom[_0x1d82dd(0x135)],'modal':dom[_0x1d82dd(0xf2)]},{'btn':dom['closePassportModal'],'modal':dom[_0x1d82dd(0x10b)]},{'btn':dom[_0x1d82dd(0xdc)],'modal':dom[_0x1d82dd(0xeb)]},{'btn':dom[_0x1d82dd(0xf6)],'modal':dom['challengeModal']},{'btn':dom[_0x1d82dd(0x146)],'modal':dom[_0x1d82dd(0x114)]}]['forEach'](_0x5ae9f6=>{const _0x5c7ae0=_0x1d82dd;if(_0x5ae9f6['btn'])_0x5ae9f6[_0x5c7ae0(0xf7)][_0x5c7ae0(0x12a)]=()=>animateCloseModal(_0x5ae9f6['modal']);}),dom['siteModalCheckInBtn']&&(dom['siteModalCheckInBtn'][_0x1d82dd(0x12a)]=async()=>{const _0x1b0ac3=_0x1d82dd,{handleCheckIn:_0x5172ea}=await import(_0x1b0ac3(0x142));_0x5172ea();}),dom['siteModalDirections']&&(dom['siteModalDirections'][_0x1d82dd(0x12a)]=()=>{const _0x2738a6=_0x1d82dd,_0x5b093c=state[_0x2738a6(0x109)];if(_0x5b093c)openGoogleMaps(_0x5b093c[_0x2738a6(0xfa)][_0x2738a6(0x12c)][0x0],_0x5b093c[_0x2738a6(0xfa)][_0x2738a6(0x12c)][0x1],_0x2738a6(0x147),_0x5b093c[_0x2738a6(0x12e)]);}),dom['siteModalAskAI']&&(dom[_0x1d82dd(0x107)][_0x1d82dd(0x12a)]=async()=>{const _0x5322d1=_0x1d82dd,_0x4a6f3f=state[_0x5322d1(0x109)];if(!_0x4a6f3f)return;const {initializeChatSystem:_0x154273,handleSendMessage:_0x35a0e7}=await import(_0x5322d1(0x14f));_0x154273(),animateCloseModal(dom[_0x5322d1(0xf2)]),animateOpenModal(dom[_0x5322d1(0x118)]),dom[_0x5322d1(0x11e)][_0x5322d1(0xdf)]=_0x5322d1(0xff)+_0x4a6f3f['name']+'.',_0x35a0e7();}),dom[_0x1d82dd(0x11d)]&&(dom[_0x1d82dd(0x11d)]['onclick']=()=>{const _0x16065a=_0x1d82dd,_0x6f8cc1=dom['siteModalMoreContent'][_0x16065a(0xe1)][_0x16065a(0x112)]('hidden');dom[_0x16065a(0x11d)][_0x16065a(0x15a)]=_0x6f8cc1?'More\x20info':_0x16065a(0x10c);}),dom[_0x1d82dd(0xf8)]&&(dom[_0x1d82dd(0xf8)]['onclick']=_0x4e2765=>{const _0x25cc9e=_0x1d82dd;_0x4e2765[_0x25cc9e(0x124)]();const _0x3c51a1=state[_0x25cc9e(0x109)];if(_0x3c51a1)openGoogleMaps(_0x3c51a1[_0x25cc9e(0xfa)]['marker'][0x0],_0x3c51a1[_0x25cc9e(0xfa)][_0x25cc9e(0x12c)][0x1],_0x25cc9e(0xe0),_0x3c51a1[_0x25cc9e(0x12e)]);}),dom[_0x1d82dd(0x149)]&&(dom[_0x1d82dd(0x149)]['onclick']=_0x312a91=>{const _0x491eb5=_0x1d82dd;_0x312a91['preventDefault']();const _0x1d5d09=state[_0x491eb5(0x109)];if(_0x1d5d09)openGoogleMaps(_0x1d5d09['coordinates'][_0x491eb5(0x12c)][0x0],_0x1d5d09[_0x491eb5(0xfa)][_0x491eb5(0x12c)][0x1],_0x491eb5(0xe4),_0x1d5d09[_0x491eb5(0x12e)]);}),dom[_0x1d82dd(0x127)]&&(dom[_0x1d82dd(0x127)][_0x1d82dd(0x12a)]=async()=>{const _0x5e92cc=_0x1d82dd,{filterMarkers:_0x3df029}=await import(_0x5e92cc(0x126));_0x3df029(_0x5e92cc(0x128));}),dom[_0x1d82dd(0x14d)]&&(dom[_0x1d82dd(0x14d)][_0x1d82dd(0x12a)]=async()=>{const _0x3d9d43=_0x1d82dd,{filterMarkers:_0x2e021b}=await import(_0x3d9d43(0x126));_0x2e021b('recommended');});}function setupUIExtras(){const _0x316508=a0_0x1085,_0x5aebe5=_0x28cfda=>{const _0xb2f946=a0_0x1085;document[_0xb2f946(0x10f)][_0xb2f946(0x116)][_0xb2f946(0x159)]('--content-font-size',_0x28cfda+'%');};let _0x107048=0x64;if(dom[_0x316508(0x152)])dom[_0x316508(0x152)][_0x316508(0x12a)]=()=>{_0x107048<0x96&&(_0x107048+=0xa,_0x5aebe5(_0x107048));};if(dom[_0x316508(0x12f)])dom[_0x316508(0x12f)]['onclick']=()=>{_0x107048>0x50&&(_0x107048-=0xa,_0x5aebe5(_0x107048));};if(dom['btnTextSizeReset'])dom[_0x316508(0x130)][_0x316508(0x12a)]=()=>{_0x107048=0x64,_0x5aebe5(_0x107048);};dom['btnUIZoomIn']&&(dom[_0x316508(0x13d)]['onclick']=()=>{const _0x341bce=_0x316508;state[_0x341bce(0xec)]=Math[_0x341bce(0xe6)]((state['uiZoom']||0x1)+0.1,1.5),document['body'][_0x341bce(0x116)]['zoom']=state[_0x341bce(0xec)];}),dom['btnUIZoomOut']&&(dom['btnUIZoomOut'][_0x316508(0x12a)]=()=>{const _0x2071d0=_0x316508;state['uiZoom']=Math[_0x2071d0(0x11f)]((state['uiZoom']||0x1)-0.1,0.8),document['body'][_0x2071d0(0x116)][_0x2071d0(0x123)]=state[_0x2071d0(0xec)];}),dom['previewCloseBtn']&&(dom['previewCloseBtn'][_0x316508(0x12a)]=async()=>{const _0x5f0ab5=_0x316508,{closePreviewCard:_0x3ca8d6}=await import(_0x5f0ab5(0x126));_0x3ca8d6();}),dom[_0x316508(0xed)]&&(dom[_0x316508(0xed)]['onclick']=async()=>{const _0x92e7e1=_0x316508,{handleMarkerClick:_0x57e06d}=await import(_0x92e7e1(0x126)),_0x3cb571=state[_0x92e7e1(0xde)]['find'](_0x338113=>_0x338113['id']===state[_0x92e7e1(0xf4)]),_0x1a4ca7=state[_0x92e7e1(0x155)][state['currentPreviewSiteId']];if(_0x3cb571&&_0x1a4ca7){const {closePreviewCard:_0xe96b9a}=await import(_0x92e7e1(0x126));_0xe96b9a(),_0x57e06d(_0x3cb571,_0x1a4ca7);}});}function setupUserGuideSystem(){const _0x2bd8f3=a0_0x1085,_0xf6580f=document[_0x2bd8f3(0xfd)]('userGuideModal'),_0x121ec0=document[_0x2bd8f3(0xfd)](_0x2bd8f3(0x13e)),_0x27341f=document['getElementById'](_0x2bd8f3(0x111)),_0x527b21=document[_0x2bd8f3(0xfd)](_0x2bd8f3(0x158)),_0x546d54=()=>_0xf6580f['classList'][_0x2bd8f3(0x137)](_0x2bd8f3(0xfb)),_0x10447f=()=>_0xf6580f[_0x2bd8f3(0xe1)][_0x2bd8f3(0x13c)](_0x2bd8f3(0xfb));if(_0x527b21)_0x527b21['onclick']=_0x546d54;if(_0x121ec0)_0x121ec0[_0x2bd8f3(0x12a)]=_0x10447f;if(_0x27341f)_0x27341f[_0x2bd8f3(0x12a)]=_0x10447f;}async function checkForURLPasskey(){const _0x5d98a9=a0_0x1085,_0x34aa03=new URLSearchParams(window[_0x5d98a9(0x157)][_0x5d98a9(0xf3)]),_0x4a9d0c=_0x34aa03[_0x5d98a9(0x113)]('code');if(_0x4a9d0c&&!isAuthorized()){const _0x22a118=window['location'][_0x5d98a9(0x10a)]+'//'+window[_0x5d98a9(0x157)][_0x5d98a9(0xfc)]+window['location'][_0x5d98a9(0x103)];window[_0x5d98a9(0x154)]['replaceState']({'path':_0x22a118},'',_0x22a118);if(dom[_0x5d98a9(0x13a)]&&dom[_0x5d98a9(0xe7)]){dom[_0x5d98a9(0x13a)][_0x5d98a9(0xe1)][_0x5d98a9(0x13c)](_0x5d98a9(0xfb)),dom[_0x5d98a9(0xe7)][_0x5d98a9(0xe1)][_0x5d98a9(0x137)](_0x5d98a9(0xfb));if(dom[_0x5d98a9(0x102)])dom[_0x5d98a9(0x102)][_0x5d98a9(0xdf)]=_0x4a9d0c;showPlatformWarning();}}}function a0_0x1085(_0x10de4b,_0x4771a4){_0x10de4b=_0x10de4b-0xdc;const _0x47f6aa=a0_0x47f6();let _0x108562=_0x47f6aa[_0x10de4b];return _0x108562;}document[a0_0x3411d5(0x13b)](a0_0x3411d5(0x120),initApp);