function a1_0xe123(){const _0x4e0e20=['Master\x20Explorer','length','error','889BFepXI','9952857vTcUcI','onload','3156648DPFxCX','badgeCaptionDisplay','badgeStatusStamp','opacity','addEventListener','5BapIfQ','Junior\x20Explorer','hidden','download','#fdfaf5','click','image/png','remove','btnGenerateBadge','disabled','10000','replace','BWM-Explorer-','3290277RSCKZR','trim','hiddenBadgeTemplate','2261818njsuKI','explorerNameInput','badgeNameDisplay','result','explorerPhotoInput','-50','badgeDateDisplay','href','getElementById','14872gQyjSe','zIndex','src','textContent','\x22The\x20bearer\x20is\x20currently\x20exploring\x20Kuala\x20Lumpur\x27s\x20heritage\x20sites.\x20Currently\x20visited\x20','style','change','files','target','Failed\x20to\x20generate\x20ID.\x20Please\x20try\x20again.','add','badgeStatusDisplay','3618690fDrrZA','462464yTYpKG','classList','readAsDataURL','toLocaleDateString','/11\x20sites.\x22','✨\x20Generate\x20&\x20Download\x20ID','Unknown\x20Explorer','createElement','badgeProfileImage','value','Capture\x20failed:','visitedSites'];a1_0xe123=function(){return _0x4e0e20;};return a1_0xe123();}(function(_0x307a5f,_0x509867){const _0x1d203f=a1_0x5673,_0x53061c=_0x307a5f();while(!![]){try{const _0x10d291=-parseInt(_0x1d203f(0x1a8))/0x1+parseInt(_0x1d203f(0x1cf))/0x2+parseInt(_0x1d203f(0x1cc))/0x3+parseInt(_0x1d203f(0x1ba))/0x4+parseInt(_0x1d203f(0x1bf))/0x5*(-parseInt(_0x1d203f(0x1a7))/0x6)+parseInt(_0x1d203f(0x1b7))/0x7*(-parseInt(_0x1d203f(0x1d8))/0x8)+-parseInt(_0x1d203f(0x1b8))/0x9;if(_0x10d291===_0x509867)break;else _0x53061c['push'](_0x53061c['shift']());}catch(_0x5e3a37){_0x53061c['push'](_0x53061c['shift']());}}}(a1_0xe123,0x94c05));import{dom}from'./dom.js';import{state}from'./state.js';export function setupBadgeGeneration(){const _0xf50fa0=a1_0x5673,_0x1e2f09=document[_0xf50fa0(0x1d7)]('btnGenerateBadge');_0x1e2f09&&_0x1e2f09['addEventListener'](_0xf50fa0(0x1c4),captureAndDownloadBadge);const _0x5ed4c9=document['getElementById'](_0xf50fa0(0x1d3));_0x5ed4c9&&_0x5ed4c9[_0xf50fa0(0x1be)](_0xf50fa0(0x1de),function(_0x467123){const _0x179235=_0xf50fa0,_0x12e1e8=_0x467123[_0x179235(0x1e0)][_0x179235(0x1df)][0x0];if(_0x12e1e8){const _0x52e4ad=new FileReader();_0x52e4ad[_0x179235(0x1b9)]=function(_0x201252){const _0x197538=_0x179235,_0x59f316=document['getElementById'](_0x197538(0x1b0));if(_0x59f316)_0x59f316[_0x197538(0x1da)]=_0x201252[_0x197538(0x1e0)][_0x197538(0x1d2)];},_0x52e4ad[_0x179235(0x1aa)](_0x12e1e8);}});}export async function captureAndDownloadBadge(){const _0x2e80cf=a1_0x5673,_0x58a3dd=document[_0x2e80cf(0x1d7)](_0x2e80cf(0x1d0)),_0x56d76e=document[_0x2e80cf(0x1d7)](_0x2e80cf(0x1d1)),_0x4b676f=document[_0x2e80cf(0x1d7)](_0x2e80cf(0x1d5)),_0x3db3ab=document['getElementById'](_0x2e80cf(0x1ce)),_0x3bcce4=document[_0x2e80cf(0x1d7)](_0x2e80cf(0x1c7));if(!_0x3db3ab)return;const _0x25b303=_0x58a3dd[_0x2e80cf(0x1b1)][_0x2e80cf(0x1cd)]()||_0x2e80cf(0x1ae);_0x56d76e[_0x2e80cf(0x1db)]=_0x25b303,_0x4b676f[_0x2e80cf(0x1db)]=new Date()[_0x2e80cf(0x1ab)]('en-GB'),updateBadgeTemplateStatus(),_0x3bcce4[_0x2e80cf(0x1c8)]=!![],_0x3bcce4[_0x2e80cf(0x1db)]='⌛\x20Generating...';try{_0x3db3ab[_0x2e80cf(0x1dd)]['opacity']='1',_0x3db3ab[_0x2e80cf(0x1dd)][_0x2e80cf(0x1d9)]=_0x2e80cf(0x1c9);const _0x21e76f=await html2canvas(_0x3db3ab,{'scale':0x2,'useCORS':!![],'allowTaint':!![],'backgroundColor':_0x2e80cf(0x1c3)}),_0x51dc9d=document[_0x2e80cf(0x1af)]('a');_0x51dc9d[_0x2e80cf(0x1c2)]=_0x2e80cf(0x1cb)+_0x25b303[_0x2e80cf(0x1ca)](/\s+/g,'-')+'.png',_0x51dc9d[_0x2e80cf(0x1d6)]=_0x21e76f['toDataURL'](_0x2e80cf(0x1c5)),_0x51dc9d[_0x2e80cf(0x1c4)]();}catch(_0x175b79){console[_0x2e80cf(0x1b6)](_0x2e80cf(0x1b2),_0x175b79),alert(_0x2e80cf(0x1e1));}finally{_0x3db3ab[_0x2e80cf(0x1dd)][_0x2e80cf(0x1bd)]='0',_0x3db3ab[_0x2e80cf(0x1dd)][_0x2e80cf(0x1d9)]=_0x2e80cf(0x1d4),_0x3bcce4[_0x2e80cf(0x1c8)]=![],_0x3bcce4[_0x2e80cf(0x1db)]=_0x2e80cf(0x1ad);}}function a1_0x5673(_0xe83881,_0x219ebb){_0xe83881=_0xe83881-0x1a6;const _0xe123b8=a1_0xe123();let _0x567388=_0xe123b8[_0xe83881];return _0x567388;}export function updateBadgeTemplateStatus(){const _0x593921=a1_0x5673,_0x239f65=document[_0x593921(0x1d7)](_0x593921(0x1a6)),_0x11ed2f=document[_0x593921(0x1d7)](_0x593921(0x1bb)),_0x1259a8=document[_0x593921(0x1d7)](_0x593921(0x1bc)),_0x345a8d=state[_0x593921(0x1b3)][_0x593921(0x1b5)];_0x345a8d>=0xb?(_0x239f65['textContent']=_0x593921(0x1b4),_0x11ed2f['textContent']='\x22The\x20bearer\x20has\x20successfully\x20navigated\x20and\x20documented\x20all\x2011\x20designated\x20heritage\x20sites\x20in\x20Kuala\x20Lumpur.\x22',_0x1259a8[_0x593921(0x1a9)][_0x593921(0x1c6)](_0x593921(0x1c1))):(_0x239f65['textContent']=_0x593921(0x1c0),_0x11ed2f[_0x593921(0x1db)]=_0x593921(0x1dc)+_0x345a8d+_0x593921(0x1ac),_0x1259a8[_0x593921(0x1a9)][_0x593921(0x1e2)](_0x593921(0x1c1)));}